(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{243:function(e,t,n){},245:function(e,t,n){},276:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},311:function(e,t,n){},312:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(215),c=n.n(r),i=(n(243),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,430)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))}),o=n(13),d=(n(244),n(245),n(1));var l,u=function(){return Object(d.jsx)("div",{className:"Footer",children:Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:["All Rights Reserved -  ",Object(d.jsx)("a",{target:"@",href:"https://github.com/odaiwa",children:"Odai Wattad"})," \xa9"]})})})},j=n(145),h=n(15),b=n(16),p=n(18),v=n(216),O=n(28),x=n(27),m=function e(){Object(b.a)(this,e)},f=new(function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).vacationsUrl="https://vacation-rest-api.herokuapp.com/api/vacations/",e.usersUrl="https://vacation-rest-api.herokuapp.com/api/users/",e.followersUrl="https://vacation-rest-api.herokuapp.com/api/followers/",e.registerUrl="https://vacation-rest-api.herokuapp.com/api/auth/register/",e.loginUrl="https://vacation-rest-api.herokuapp.com/api/auth/login/",e.socketUrl="https://vacation-rest-api.herokuapp.com/",e}return n}(m)),g=function(){function e(){Object(b.a)(this,e),this.socket=void 0}return Object(p.a)(e,[{key:"connect",value:function(){void 0!==this.socket&&this.socket.connected||(this.socket=Object(v.io)(f.socketUrl))}},{key:"disconnect",value:function(){this.socket&&!this.socket.disconnect()&&this.socket.disconnect()}}]),e}(),w=function e(){Object(b.a)(this,e),this.user=null,this.vacationsSocket=new g;var t=JSON.parse(sessionStorage.getItem("user"));t&&(this.user=t)};function y(e){return{type:l.UserRegistered,payload:e}}function k(e){return{type:l.UserLoggedIn,payload:e}}function S(){return{type:l.UserLoggedOut}}!function(e){e.UsersDownloaded="UsersDownloaded",e.UserRegistered="UserRegistered",e.UserLoggedIn="UserLoggedIn",e.UserLoggedOut="UserLoggedOut"}(l||(l={}));var N,D=function e(){Object(b.a)(this,e),this.vacations=[]};!function(e){e.VacationsDownloaded="VacationsDownloaded",e.VacationAdded="VacationAdded",e.VacationUpdated="VacationUpdated",e.VacationDeleted="VacationDeleted"}(N||(N={}));var U=Object(j.a)({vacationState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new D,t=arguments.length>1?arguments[1]:void 0,n=Object(h.a)({},e);switch(t.type){case N.VacationsDownloaded:n.vacations=t.payload;break;case N.VacationAdded:n.vacations.push(t.payload);break;case N.VacationUpdated:var a=n.vacations.findIndex((function(e){return e.vacationId===t.payload.vacationId}));n.vacations[a]=t.payload;break;case N.VacationDeleted:var s=n.vacations.findIndex((function(e){return e.vacationId===t.payload}));n.vacations.splice(s,1)}return n},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w,t=arguments.length>1?arguments[1]:void 0,n=Object(h.a)({},e);switch(t.type){case l.UsersDownloaded:n.user=t.payload;break;case l.UserRegistered:case l.UserLoggedIn:n.user=t.payload,n.vacationsSocket.connect(),sessionStorage.setItem("user",JSON.stringify(n.user));break;case l.UserLoggedOut:n.user=null,n.vacationsSocket.disconnect(),sessionStorage.removeItem("user")}return n}}),F=Object(j.b)(U),I=(n(276),function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).unsubscribe=void 0,a.state={user:F.getState().authState.user},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=F.subscribe((function(){return e.setState({user:F.getState().authState.user})}))}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"AuthMenu",children:[this.state.user&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("span",{children:["Hello ",this.state.user.firstName+" "+this.state.user.lastName]}),Object(d.jsx)("span",{children:" | "}),Object(d.jsx)(o.b,{to:"/logout",exact:!0,children:"Log out"})]}),!this.state.user&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{children:"Hello Guest"}),Object(d.jsx)("span",{children:" | "}),Object(d.jsx)(o.b,{to:"/login",exact:!0,children:"Log in"}),Object(d.jsx)("span",{children:" | "}),Object(d.jsx)(o.b,{to:"/register",exact:!0,children:"Register"})]})]})}}]),n}(a.Component)),V=(n(281),n.p+"static/media/vacation_icon.d0447fc5.png");var L=function(){return Object(d.jsx)("div",{className:"Logo",children:Object(d.jsx)("img",{src:V})})};n(282);var M=function(){Object(a.useEffect)((function(){e()}));var e=function(){var e=window.performance.navigation.type,t=F.getState().authState.user;e&&t&&F.getState().authState.vacationsSocket.connect()};return Object(a.useEffect)((function(){e()})),Object(d.jsxs)("div",{className:"Header",children:[Object(d.jsx)(L,{}),Object(d.jsx)(I,{}),Object(d.jsx)("h1",{children:"Best Vacations Website"})]})};n(283);var q=function(){return Object(d.jsxs)("div",{className:"Menu",children:[Object(d.jsx)(o.b,{to:"/home",children:"Home"}),Object(d.jsx)(o.b,{to:"/vacations",children:"Vacations"})]})},A=n(14),E=n(7),B=n.n(E),C=n(11),Y=n(219),P=new(function(){function e(){Object(b.a)(this,e),this.notification=new Y.a({duration:1e4,position:{x:"left",y:"top"}})}return Object(p.a)(e,[{key:"success",value:function(e){this.notification.success(e)}},{key:"error",value:function(e){var t=this.getErrorMessage(e);this.notification.error(t)}},{key:"getErrorMessage",value:function(e){var t,n;return console.log(e),"string"===typeof e?e:"string"===typeof(null===(t=e.response)||void 0===t?void 0:t.data)?e.response.data:Array.isArray(null===(n=e.response)||void 0===n?void 0:n.data)?e.response.data[0]:"string"===typeof e.message?e.message:"some error occurred, please try again"}}]),e}()),T=n(71),H=n.n(T),R=(n(302),n(56));var J=function(){var e,t;Object(a.useEffect)((function(){if(F.getState().authState.user)return n.push("/home"),void P.error("You are already logged in!")}));var n=Object(A.g)(),s=Object(R.a)(),r=s.register,c=s.handleSubmit,i=s.formState;function l(){return(l=Object(C.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.post(f.loginUrl,t);case 3:a=e.sent,F.dispatch(k(a.data)),P.success("".concat(t.username," LoggedIn successfully")),n.push("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"Login",children:Object(d.jsxs)("form",{onSubmit:c((function(e){return l.apply(this,arguments)})),children:[Object(d.jsx)("h2",{children:"Sign In"}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Username :"}),Object(d.jsx)("input",Object(h.a)({type:"text",className:"form-control",placeholder:"Enter username",autoFocus:!0},r("username",{required:{value:!0,message:"Missing username."},minLength:{value:4,message:"Username too short."}})))]}),Object(d.jsx)("span",{children:null===(e=i.errors.username)||void 0===e?void 0:e.message}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Password :"}),Object(d.jsx)("input",Object(h.a)({type:"password",className:"form-control",placeholder:"Enter password"},r("password",{required:{value:!0,message:"Missing password."},minLength:{value:6,message:"password too short."}})))]}),Object(d.jsx)("span",{children:null===(t=i.errors.password)||void 0===t?void 0:t.message}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"}),Object(d.jsx)("p",{className:"forgot-password text-right",children:Object(d.jsx)(o.b,{to:"/register",children:"New Account "})})]})})};var W=function(){var e=Object(A.g)();return Object(a.useEffect)((function(){F.dispatch(S()),P.success("Logged-out successfully."),e.push("/home")})),null};n(303);var z=function(){var e,t,n,s;Object(a.useEffect)((function(){if(F.getState().authState.user)return r.push("/home"),void P.error("You are already logged in!")}));var r=Object(A.g)();function c(){return(c=Object(C.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.post(f.registerUrl,t);case 3:n=e.sent,F.dispatch(y(n.data)),P.success("You have been successfully registered."),r.push("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var i=Object(R.a)(),l=i.register,u=i.handleSubmit,j=i.formState;return Object(d.jsxs)("div",{className:"Register",children:[Object(d.jsx)("h2",{children:"Register Form"}),Object(d.jsxs)("form",{onSubmit:u((function(e){return c.apply(this,arguments)})),children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"First name"}),Object(d.jsx)("input",Object(h.a)({type:"text",className:"form-control",placeholder:"First name",autoFocus:!0},l("firstName",{required:{value:!0,message:"Missing first name."},minLength:{value:2,message:"First name too short."}})))]}),Object(d.jsx)("span",{children:null===(e=j.errors.firstName)||void 0===e?void 0:e.message}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Last name"}),Object(d.jsx)("input",Object(h.a)({type:"text",className:"form-control",placeholder:"Last name"},l("lastName",{required:{value:!0,message:"Missing last name."},minLength:{value:2,message:"Last name too short."}})))]}),Object(d.jsx)("span",{children:null===(t=j.errors.lastName)||void 0===t?void 0:t.message}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"username:"}),Object(d.jsx)("input",Object(h.a)({type:"text",className:"form-control",placeholder:"username"},l("username",{required:{value:!0,message:"Missing username."},minLength:{value:4,message:"Username too short."}})))]}),Object(d.jsx)("span",{children:null===(n=j.errors.username)||void 0===n?void 0:n.message}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"password:"}),Object(d.jsx)("input",Object(h.a)({type:"password",className:"form-control",placeholder:"password"},l("password",{required:{value:!0,message:"Missing password."},minLength:{value:4,message:"password too short."}})))]}),Object(d.jsx)("span",{children:null===(s=j.errors.password)||void 0===s?void 0:s.message}),Object(d.jsx)("button",{className:"btn btn-primary btn-block",children:"Register"}),Object(d.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(d.jsx)(o.b,{to:"/login",children:"sign in?"})]})]})]})};n(304);var G=function(){return Object(d.jsxs)("div",{className:"Home",children:[Object(d.jsxs)("div",{className:"HomeDescription",children:[Object(d.jsx)("h3",{children:Object(d.jsx)("b",{children:"About me :"})}),Object(d.jsxs)("p",{children:[Object(d.jsx)("h4",{children:"Odai Wattad"}),"a 22 years old software Engineer from Jatt, about to finish my B.Sc. in SCE.",Object(d.jsx)("br",{}),"Currently learning full-stack development in John Bryce"]})]}),Object(d.jsxs)("div",{className:"HomeDescription",children:[Object(d.jsx)("h3",{children:Object(d.jsx)("b",{children:" About the website:"})}),Object(d.jsxs)("p",{children:["The website manager vacations you can follow vacations look for pricing and dates.",Object(d.jsx)("br",{})," ",Object(d.jsx)("br",{}),"\u2055 ",Object(d.jsx)("b",{children:"Home Page"})," where you're currently reading.",Object(d.jsx)("br",{}),"\u2055 ",Object(d.jsx)("b",{children:"Vacations"})," where you can see every think about the vacations.",Object(d.jsx)("br",{})]})]}),Object(d.jsxs)("div",{className:"HomeDescription",children:[Object(d.jsx)("h3",{children:Object(d.jsx)("b",{children:"Technologies used to develope the website: "})}),Object(d.jsxs)("dl",{children:[Object(d.jsx)("dt",{children:"Front end"}),Object(d.jsx)("dd",{children:"- React"}),Object(d.jsx)("dt",{children:"Back end"}),Object(d.jsx)("dd",{children:"- NodeJs"}),Object(d.jsx)("dt",{children:"Database"}),Object(d.jsx)("dd",{children:"- MySQL"})]}),Object(d.jsxs)("p",{children:["for state management we used ",Object(d.jsx)("b",{children:"Redux"})]}),Object(d.jsxs)("p",{children:["for Authentication we used ",Object(d.jsx)("b",{children:"JWT"})]}),Object(d.jsxs)("p",{children:["for notifications we used ",Object(d.jsx)("b",{children:"Notyf"})," Library"]})]}),Object(d.jsxs)("div",{className:"HomeDescription",children:[Object(d.jsx)("h3",{children:Object(d.jsx)("b",{children:" Contact me:"})}),Object(d.jsxs)("p",{children:["Email: odaiwa12@gmail.com, or visit my own website ",Object(d.jsx)("a",{href:"https://www.odaiwa.com",children:"Here"}),"(Currently nothing in there \ud83d\ude06)"]}),Object(d.jsx)("div",{className:"noBlock",children:Object(d.jsx)("p",{children:Object(d.jsx)("a",{href:"https://www.linkedin.com/in/odaiwa",children:"LinkedIn"})})}),Object(d.jsx)("span",{children:" | "}),Object(d.jsx)("div",{className:"noBlock",children:Object(d.jsx)("p",{children:Object(d.jsx)("a",{href:"https://www.github.com/odaiwa",children:"GitHub"})})})]})]})};n(305);var $=function(){return Object(d.jsxs)("div",{className:"PageNotFound",children:[Object(d.jsx)("h2",{children:"The page you are looking for doesn't exist."}),Object(d.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/t3otBjVZzT0?autoplay=1",allow:"autoplay",title:"Page not Found"})]})},Q=function(){function e(){Object(b.a)(this,e),this.vacationId=void 0,this.destination=void 0,this.startDate=void 0,this.endDate=void 0,this.price=void 0,this.description=void 0,this.img=void 0}return Object(p.a)(e,null,[{key:"convertToFormData",value:function(e){var t=new FormData;return t.append("destination",e.destination),t.append("startDate",e.startDate),t.append("endDate",e.endDate),t.append("price",e.price.toString()),t.append("description",e.description),t.append("img",e.img.item(0)),t}}]),e}(),Z=H.a.create();Z.interceptors.request.use((function(e){return F.getState().authState.user&&(e.headers={authorization:"Bearer "+F.getState().authState.user.token}),e}));var _=Z;n(306);var K=function(){var e,t,n,s,r,c,i,l,u,j,b=Object(A.g)(),p=Object(R.a)(),v=p.register,O=p.handleSubmit,x=p.formState;function m(e,t){var n=new Date,a=e.split("-"),s=t.split("-"),r=+n.getFullYear(),c=+n.getMonth()+1,i=+n.getDate(),o=+a[0],d=+a[1],l=+a[2],u=+s[0],j=+s[1],h=+s[2];if(o<r)return!1;if(o===r){if(d<c)return!1;if(d===c&&l<i)return!1}if(o>u)return!1;if(o===u){if(d>j)return!1;if(d===j&&l>h)return!1}return!0}function g(){return(g=Object(C.a)(B.a.mark((function e(t){var n,a,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(t.startDate,t.endDate)){e.next=4;break}return P.error("wrong date"),e.abrupt("return");case 4:return n=F.getState().authState.vacationsSocket.socket,e.next=7,_.post(f.vacationsUrl,Q.convertToFormData(t));case 7:a=e.sent,s=a.data,n.emit("add-vacation-from-client",s),P.success("Vacation has been added."),b.push("/vacations"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),P.error(e.t0),"Your login session has expired."===e.t0&&(F.dispatch(S()),b.push("/login"));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){return F.getState().authState.user?F.getState().authState.user.isAdmin?void 0:(b.push("/home"),void P.error("You are not authorized to do add vacation!")):(b.push("/login"),void P.error("You are not logged in!"))})),Object(d.jsx)("div",{className:"AddVacation",children:Object(d.jsxs)("form",{onSubmit:O((function(e){return g.apply(this,arguments)})),children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Destination"}),Object(d.jsx)("input",Object(h.a)(Object(h.a)({type:"text"},v("destination",{required:!0,minLength:2})),{},{className:"form-control",placeholder:"destination",autoFocus:!0}))]}),"required"===(null===(e=x.errors.destination)||void 0===e?void 0:e.type)&&Object(d.jsx)("span",{children:"Missing destination."}),"minLength"===(null===(t=x.errors.destination)||void 0===t?void 0:t.type)&&Object(d.jsx)("span",{children:"destination too short."}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Start Date:"}),Object(d.jsx)("input",Object(h.a)(Object(h.a)({type:"date",className:"form-control"},v("startDate",{required:!0})),{},{placeholder:"Start Date"}))]}),"required"===(null===(n=x.errors.startDate)||void 0===n?void 0:n.type)&&Object(d.jsx)("span",{children:"Missing Start Date."}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"End Date:"}),Object(d.jsx)("input",Object(h.a)(Object(h.a)({type:"date",className:"form-control"},v("endDate",{required:!0})),{},{placeholder:"End Date"}))]}),"required"===(null===(s=x.errors.endDate)||void 0===s?void 0:s.type)&&Object(d.jsx)("span",{children:"Missing endDate."}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Price: "}),Object(d.jsx)("input",Object(h.a)(Object(h.a)({type:"number",className:"form-control"},v("price",{required:!0,minLength:1,min:0})),{},{placeholder:"price"}))]}),"required"===(null===(r=x.errors.price)||void 0===r?void 0:r.type)&&Object(d.jsx)("span",{children:"Missing price."}),"minLength"===(null===(c=x.errors.price)||void 0===c?void 0:c.type)&&Object(d.jsx)("span",{children:"Price too short."}),"min"===(null===(i=x.errors.price)||void 0===i?void 0:i.type)&&Object(d.jsx)("span",{children:"price cannot be negative."}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Description: "}),Object(d.jsx)("br",{}),Object(d.jsx)("textarea",Object(h.a)(Object(h.a)({},v("description",{required:!0,minLength:2})),{},{placeholder:"description"}))]}),"required"===(null===(l=x.errors.description)||void 0===l?void 0:l.type)&&Object(d.jsx)("span",{children:"Missing description."}),"minLength"===(null===(u=x.errors.description)||void 0===u?void 0:u.type)&&Object(d.jsx)("span",{children:"description too short."}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Image: "})," ",Object(d.jsx)("br",{}),Object(d.jsx)("input",Object(h.a)({type:"file",accept:"image/*"},v("img",{required:!0})))]}),"required"===(null===(j=x.errors.img)||void 0===j?void 0:j.type)&&Object(d.jsx)("span",{children:"Missing image."}),Object(d.jsx)("button",{children:"Add"}),Object(d.jsx)("p",{className:"forgot-password text-right",children:Object(d.jsx)(o.b,{to:"/vacations",children:"Don't want to Add? Back to List "})})]})})},X=n(38);n(307);var ee=function(){var e=Object(A.h)(),t=e.pathname.substr(e.pathname.lastIndexOf("/")+1),n=Object(A.g)(),s=Object(R.a)(),r=s.register,c=s.handleSubmit,i=s.formState.errors,l=Object(a.useState)([]),u=Object(X.a)(l,2),j=u[0],b=u[1];function p(e,t){var n=new Date,a=e.split("-"),s=t.split("-"),r=+n.getFullYear(),c=+n.getMonth()+1,i=+n.getDate(),o=+a[0],d=+a[1],l=+a[2],u=+s[0],j=+s[1],h=+s[2];if(o<r)return!1;if(o===r){if(d<c)return!1;if(d===c&&l<i)return!1}if(o>u)return!1;if(o===u){if(d>j)return!1;if(d===j&&l>h)return!1}return!0}function v(e){return O.apply(this,arguments)}function O(){return(O=Object(C.a)(B.a.mark((function e(a){var s,r,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(a.startDate,a.endDate)){e.next=4;break}return P.error("wrong date"),e.abrupt("return");case 4:return s=F.getState().authState.vacationsSocket.socket,e.next=7,_.put(f.vacationsUrl+"".concat(t),Q.convertToFormData(a));case 7:r=e.sent,c=r.data,s.emit("update-vacation-from-client",c),P.success("Vacation has been Edit."),n.push("/vacations"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),P.error(e.t0),"Your login session has expired."===e.t0&&(F.dispatch(S()),n.push("/login"));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){return F.getState().authState.user?F.getState().authState.user.isAdmin?void _.get(f.vacationsUrl+"".concat(t)).then((function(e){return b(e.data)})).catch((function(e){P.error(e),"Your login session has expired."===e.response.data&&(F.dispatch(S()),n.push("/login"))})):(n.push("/home"),void P.error("You are not authorized to do edit vacation!")):(n.push("/login"),void P.error("You are not logged in!"))}),[]),Object(d.jsxs)("div",{className:"EditVacations MainComponents Box",children:[Object(d.jsx)("div",{className:"BoxIcons",children:Object(d.jsx)(o.b,{to:"/vacations",children:"Undo"})}),j.map((function(e){var t,n,a,s,o,l,u,j;return Object(d.jsxs)("form",{onSubmit:c(v),children:[Object(d.jsx)("label",{children:"Destination:"}),Object(d.jsx)("input",Object(h.a)({type:"text",defaultValue:e.destination},r("destination",{required:!0,minLength:2}))),"required"===(null===(t=i.destination)||void 0===t?void 0:t.type)&&Object(d.jsx)("span",{children:"Missing destination."}),"minLength"===(null===(n=i.destination)||void 0===n?void 0:n.type)&&Object(d.jsx)("span",{children:"destination too short."}),Object(d.jsx)("label",{children:"Start Date:"}),Object(d.jsx)("input",Object(h.a)({type:"date",defaultValue:e.startDate},r("startDate",{required:!0}))),"required"===(null===(a=i.startDate)||void 0===a?void 0:a.type)&&Object(d.jsx)("span",{children:"Missing Start Date."}),Object(d.jsx)("label",{children:"End Date:"}),Object(d.jsx)("input",Object(h.a)({type:"date",defaultValue:e.endDate},r("endDate",{required:!0}))),"required"===(null===(s=i.endDate)||void 0===s?void 0:s.type)&&Object(d.jsx)("span",{children:"Missing endDate."}),Object(d.jsx)("label",{children:"Price:"}),Object(d.jsx)("input",Object(h.a)({type:"number",defaultValue:e.price},r("price",{required:!0,minLength:1}))),"required"===(null===(o=i.price)||void 0===o?void 0:o.type)&&Object(d.jsx)("span",{children:"Missing price."}),"minLength"===(null===(l=i.price)||void 0===l?void 0:l.type)&&Object(d.jsx)("span",{children:"Price too short."}),Object(d.jsx)("label",{children:"Description:"}),Object(d.jsx)("textarea",Object(h.a)({defaultValue:e.description},r("description",{required:!0,minLength:2}))),"required"===(null===(u=i.description)||void 0===u?void 0:u.type)&&Object(d.jsx)("span",{children:"Missing description."}),"minLength"===(null===(j=i.description)||void 0===j?void 0:j.type)&&Object(d.jsx)("span",{children:"Description too short."}),Object(d.jsx)("label",{children:"Image: "}),Object(d.jsx)("input",Object(h.a)({type:"file",accept:"image/*"},r("img"))),Object(d.jsx)("button",{children:"Update"})]},e.vacationId)}))]})},te=(n(308),n.p+"static/media/loader.842b5575.gif");var ne=function(){return Object(d.jsx)("div",{className:"Loader",children:Object(d.jsx)("img",{src:te})})},ae=(n(309),function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).deleteVacation=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are you sure?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,_.delete(f.vacationsUrl+a.state.id);case 6:P.success("Vacation has beeb deleted!"),a.props.history.push("/vacations"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),P.error("Error"+e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.state={vacations:[],id:0,admin:0,correntVacation:""},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=+this.props.match.params.id,this.setState({correntVacation:f.vacationsUrl+t}),e.next=5,_.get(f.vacationsUrl+t);case 5:n=e.sent,this.setState({vacations:n.data,id:t,admin:F.getState().authState.user.isAdmin}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),P.error(e.t0),"Your login session has expired."===e.t0&&(F.dispatch(S()),this.props.history.push("/login"));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState=function(e,t){};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"MainComponents Box VacationDetails",children:[0===this.state.vacations.length&&Object(d.jsx)(ne,{}),this.state.vacations.map((function(t){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"BoxIcons",children:[Object(d.jsx)(o.b,{to:"/vacations"}),1===e.state.admin&&Object(d.jsx)(o.b,{to:"/vacations/edit/".concat(t.vacationId),children:" "})]}),Object(d.jsx)("h2",{children:t.destination}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{children:"From: "}),Object(d.jsxs)("span",{children:[" ",t.startDate]}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{children:"Until: "}),Object(d.jsxs)("span",{children:[" ",t.endDate]}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{children:"Price: "}),Object(d.jsxs)("span",{children:[" ",t.price," $"]}),Object(d.jsx)("p",{children:t.description}),Object(d.jsx)("img",{alt:"#",src:f.vacationsUrl+"images/"+t.img})]}),1===e.state.admin&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:["  ",Object(d.jsxs)("button",{className:"Btn",children:[" ",Object(d.jsx)(o.b,{to:"/vacations/edit/".concat(e.state.id),children:"Edit "})]})]}),Object(d.jsxs)("span",{onClick:function(){return e.deleteVacation()},children:[" ",Object(d.jsx)("button",{className:"Btn",children:"Delete "})]})]}),Object(d.jsx)(o.b,{to:"/vacations",children:"Back to List"})]},t.vacationId)}))]})}}]),n}(a.Component)),se=n(20),re=(n(310),n(311),function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={numberOfFollowers:[]},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get(f.followersUrl+"user-count");case 3:t=e.sent,this.setState({numberOfFollowers:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),P.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState=function(e,t){};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"FollowersCounter",children:[Object(d.jsx)("span",{children:"Followers: "})," ",this.state.numberOfFollowers.map((function(t){return t.vacationId===e.props.vacationId&&Object(d.jsx)("div",{className:"FollowersIcon",children:+t.numberOfUsers},t.vacationId)}))]})}}]),n}(a.Component)),ce=(n(312),function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).followOnVacation=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post(f.followersUrl+a.props.uuid+"/"+a.props.vacationId);case 2:P.success("started Following Vacation");case 3:case"end":return e.stop()}}),e)}))),a.unFollowOnVacation=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.delete(f.followersUrl+a.props.uuid+"/"+a.props.vacationId);case 2:P.success("UnFollowing Vacation");case 3:case"end":return e.stop()}}),e)}))),a.isFollowing=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({isFollowing:!a.state.isFollowing});case 2:a.state.isFollowing?a.followOnVacation():(a.unFollowOnVacation(),localStorage.clear());case 3:case"end":return e.stop()}}),e)}))),a.state={isFollowing:!1},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleFollow();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFollow",value:function(){var e=Object(C.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get(f.followersUrl+this.props.uuid+"/"+this.props.vacationId);case 3:t=e.sent,t.data&&this.setState({isFollowing:!0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),P.error(e.t0),"Your login session has expired."===e.t0&&(F.dispatch(S()),this.props.history.push(f.socketUrl));case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(d.jsx)("div",{className:"FollowersList",children:Object(d.jsx)("div",{onClick:this.isFollowing,children:Object(d.jsxs)("footer",{className:"w3-container w3-blue",children:[!1===this.state.isFollowing&&Object(d.jsx)("button",{className:"FollowButton",children:"Follow"}),!0===this.state.isFollowing&&Object(d.jsx)("button",{className:"FollowButton",children:"UnFollow"})]})})})}}]),n}(a.Component));n(313);var ie=function(e){var t=Object(A.g)(),n=function(){var n=Object(C.a)(B.a.mark((function n(){var a,s;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=F.getState().authState.vacationsSocket.socket,window.confirm("Are you sure?")){n.next=5;break}return n.abrupt("return");case 5:return s=e.vacation.destination,n.next=8,_.delete(f.vacationsUrl+e.vacation.vacationId);case 8:a.emit("delete-vacation-from-client",e.vacation.vacationId),P.success("Vacation to ".concat(s," has been deleted successfully")),t.push("/vacations"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),P.error("Error"+n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"VacationCard",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"dataAndPhoto",children:Object(d.jsx)("div",{className:"w3-container",children:Object(d.jsxs)("div",{children:[Object(d.jsx)("header",{className:"w3-container w3-blue",children:Object(d.jsx)("h1",{children:e.vacation.destination})}),Object(d.jsx)(re,{vacationId:e.vacation.vacationId}),Object(d.jsxs)("div",{className:"w3-container",children:[Object(d.jsx)("label",{children:"From: "}),Object(d.jsx)("span",{children:e.vacation.startDate}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{children:"Until: "}),Object(d.jsx)("span",{children:e.vacation.endDate}),Object(d.jsx)("br",{}),Object(d.jsx)("label",{children:"Price: "}),Object(d.jsxs)("span",{children:[e.vacation.price," $"]})]})]})},e.vacation.vacationId)}),Object(d.jsx)("div",{className:"dataAndPhoto",children:Object(d.jsx)("img",{src:f.vacationsUrl+"images/"+e.vacation.img})}),Object(d.jsx)("div",{className:"AllIcons",children:Object(d.jsxs)("div",{children:[1===e.admin&&Object(d.jsxs)("div",{children:[" ",Object(d.jsx)("span",{children:Object(d.jsx)(o.b,{to:"/vacations/edit/".concat(e.vacation.vacationId),children:"Edit "})})," | ",Object(d.jsxs)("span",{onClick:function(){return n()},children:[Object(d.jsx)(o.b,{to:"/vacations",children:" Delete"})," "]})," "]}),Object(d.jsx)(o.b,{to:"/vacations/details/".concat(e.vacation.vacationId),children:" More Info "}),0===e.admin&&Object(d.jsx)(ce,{uuid:F.getState().authState.user.uuid,vacationId:e.vacation.vacationId})]})})]})})},oe=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={vacations:[],isThereAnyVicaion:0,user:F.getState().authState.user,admin:0,isFollow:!1},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(B.a.mark((function e(){var t,n=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,F.getState().authState.user){e.next=5;break}return this.props.history.push("/login"),P.error("You are not logged in!"),e.abrupt("return");case 5:if(0!==this.state.vacations.length){e.next=14;break}return e.next=8,_.get(f.vacationsUrl);case 8:0===(t=e.sent).data.length&&this.setState({isThereAnyVicaion:0}),this.setState({vacations:t.data,admin:this.state.user.isAdmin}),F.dispatch((a=t.data,{type:N.VacationsDownloaded,payload:a})),e.next=15;break;case 14:this.setState({admin:this.state.user.isAdmin});case 15:F.getState().authState.vacationsSocket.socket.on("add-vacation-from-server",(function(e){var t=Object(se.a)(n.state.vacations);t.push(e),n.setState({vacations:t})})),F.getState().authState.vacationsSocket.socket.on("update-vacation-from-server",(function(e){var t=Object(se.a)(n.state.vacations),a=t.findIndex((function(t){return t.vacationId===e.vacationId}));t[a]=e,n.setState({vacations:t})})),F.getState().authState.vacationsSocket.socket.on("delete-vacation-from-server",(function(e){var t=Object(se.a)(n.state.vacations),a=t.findIndex((function(t){return t.vacationId===e}));t.splice(a,1),n.setState({vacations:t})})),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),P.error(e.t0),"Your login session has expired."===e.t0&&(this.props.history.push("/logout"),F.dispatch(S()),this.props.history.push("/login"));case 24:case"end":return e.stop()}var a}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"VacationsList",children:[Object(d.jsxs)("div",{className:"VacationOptions",children:[0===this.state.vacations.length&&Object(d.jsx)(ne,{}),1===this.state.admin&&Object(d.jsx)(o.b,{className:"AddButton",to:"/vacations/new/",children:Object(d.jsx)("button",{className:"Btn",children:"Add Vacation"})}),1===this.state.admin&&Object(d.jsx)(o.b,{to:"/vacations-chart",children:Object(d.jsx)("button",{className:"Btn",children:"Vacations Chart"})})]}),Object(d.jsx)("div",{children:Object(d.jsxs)("p",{children:[" ",Object(d.jsxs)("b",{children:[this.state.vacations.length," vacations currently available "]})]})}),this.state.vacations.map((function(t){return Object(d.jsx)(ie,{vacation:t,admin:e.state.admin},t.vacationId)}))]})}}]),n}(a.Component),de=(n(314),n(428)),le=n(429),ue=n(426),je=function(e){Object(O.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={following:[],details:[]},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(C.a)(B.a.mark((function e(){var t,n=this;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,F.getState().authState.user){e.next=5;break}return this.props.history.push("/login"),P.error("You are not logged in!"),e.abrupt("return");case 5:if(F.getState().authState.user.isAdmin){e.next=9;break}return this.props.history.push("/vacations"),P.error("You are not authorized!"),e.abrupt("return");case 9:if(0!==this.state.details.length){e.next=17;break}return e.next=12,_.get(f.followersUrl+"user-count");case 12:return t=e.sent,e.next=15,this.setState({following:t.data});case 15:this.state.following.forEach(function(){var e=Object(C.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={quarter:t.destination,earnings:t.numberOfUsers},n.state.details.push(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({details:this.state.details});case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),P.error(e.t0),"Your login session has expired."===e.t0&&(F.dispatch(S()),this.props.history.push("/login"));case 23:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"VacationsChart MainComponents ",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)(o.b,{to:"/vacations",children:"Undo"}),Object(d.jsx)("h2",{children:"The top popular vacations"})]}),Object(d.jsx)("div",{className:" MainComponents Box",children:Object(d.jsxs)(de.a,{domainPadding:20,children:[Object(d.jsx)(le.a,{tickValues:[1,2,3,4],tickFormat:this.state.details.quarter}),Object(d.jsx)(le.a,{dependentAxis:!0,tickFormat:function(e){return"".concat(e)}}),Object(d.jsx)(ue.a,{data:this.state.details,x:"quarter",y:"earnings"})]})})]})}}]),n}(a.Component);var he=function(){return Object(d.jsx)("div",{children:Object(d.jsxs)(A.d,{children:[Object(d.jsx)(A.b,{path:"/home",component:G,exact:!0}),Object(d.jsx)(A.b,{path:"/register",component:z,exact:!0}),Object(d.jsx)(A.b,{path:"/login",component:J,exact:!0}),Object(d.jsx)(A.b,{path:"/logout",component:W,exact:!0}),Object(d.jsx)(A.b,{path:"/vacations",component:oe,exact:!0}),Object(d.jsx)(A.b,{path:"/vacations/details/:id",component:ae,exact:!0}),Object(d.jsx)(A.b,{path:"/vacations/new",component:K,exact:!0}),Object(d.jsx)(A.b,{path:"/vacations-chart",component:je,exact:!0}),Object(d.jsx)(A.b,{path:"/vacations/edit/:id",component:ee,exact:!0}),Object(d.jsx)(A.a,{from:"/",to:"/home",exact:!0}),Object(d.jsx)(A.b,{component:$})]})})};n(417);var be=function(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)("div",{className:"Layout",children:[Object(d.jsx)("header",{children:Object(d.jsx)(M,{})}),Object(d.jsx)("aside",{children:Object(d.jsx)(q,{})}),Object(d.jsx)("main",{children:Object(d.jsx)(he,{})}),Object(d.jsx)("footer",{children:Object(d.jsx)(u,{})})]})})};c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsxs)(o.a,{children:[" ",Object(d.jsx)(be,{})," "]})}),document.getElementById("root")),i()}},[[418,1,2]]]);
//# sourceMappingURL=main.5f3c9784.chunk.js.map